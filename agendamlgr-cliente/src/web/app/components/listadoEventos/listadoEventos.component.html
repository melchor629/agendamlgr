<div class="container-fluid" style="margin-bottom: 1rem;">
    <agm-map style="height: 40vh;" [latitude]="latitud" [longitude]="longitud" [zoom]="12">
        <agm-marker *ngFor="let evento of eventos" [latitude]="evento.latitud" [longitude]="evento.longitud">
            <agm-snazzy-info-window [closeWhenOthersOpen]="true">
                <ng-template>
                    <p class="font-weight-bold">{{evento.nombre}}:</p>
                    <p>{{evento.descripcion}}</p>
                    <p>{{evento.fecha | parseDateString | date:'EEEE d \'de\' MMMM (y), HH:mm':'':'es'}}</p>
                    <p *ngIf="evento.precio">{{evento.precio | currency:'EUR':'symbol'}}</p>
                    <p><a routerLink="/verEvento/{{evento.id}}" class="card-link">Ver evento</a></p>
                   <!-- <div class="card">
                        <div class="card-body">
                            <h4 class="card-title" style="font-size: 1.3em;">{{evento.nombre}}</h4>
                            <h6 class="card-subtitle mb-2 text-muted" style="font-size: 1.3em;">{{evento.fecha | parseDateString | date:'EEEE d
                                \'de\' MMMM (y), HH:mm':'':'es'}}</h6>
                            <h6 *ngIf="evento.precio" class="card-subtitle mb-2 text-muted" style="font-size: 1.3em;">{{evento.precio |
                                currency:'EUR':'symbol'}}</h6>
                            <p class="card-text">{{evento.descripcion}}</p>
                            <a routerLink="/verEvento/{{evento.id}}" class="card-link">Ver evento</a>
                        </div>
                    </div> -->

                </ng-template>
            </agm-snazzy-info-window>
        </agm-marker>
    </agm-map>
</div>

<div class="d-flex justify-content-center" *ngIf="eventos && eventos.length !== 0">
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            <li [class]="page === 0 ? 'page-item disabled' : 'page-item'">
                <a class="page-link" href="javascript:window.Boolean(0)" aria-label="Anterior"
                   (click)="goToPreviousPage()">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Anterior</span>
                </a>
            </li>
            <li *ngFor="let i of range(0, totalPages)" [class]="page === i ? 'page-item active' : 'page-item'">
                <a class="page-link" href="javascript:window.Boolean(0)" (click)="goToPage(i)">{{ i + 1 }}</a>
            </li>
            <li [class]="page === totalPages - 1 ? 'page-item disabled' : 'page-item'">
                <a class="page-link" href="javascript:window.Boolean(0)" aria-label="Siguiente"
                   (click)="goToNextPage()">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Siguiente</span>
                </a>
            </li>
        </ul>
    </nav>
</div>

<div class="card-columns" *ngIf="eventos">
    <div *ngFor="let evento of eventos.slice(page * eventosPorPagina, (page + 1) * eventosPorPagina)" class="card">
        <img *ngIf="evento.fotoUrl" [src]="evento.fotoUrl" class="card-img-top" alt="{{ evento.nombre }}"/>
        <div class="card-body">
            <h4>{{ evento.nombre }}</h4>
            <h6 class="card-subtitle mb-2 text-muted">
                {{ evento.fecha | parseDateString | date:'EEEE d \'de\' MMMM (y), HH:mm':'':'es' }}
            </h6>
            <p class="card-text">
                {{ evento.descripcion }}
            </p>
            <a routerLink="/verEvento/{{evento.id}}" class="card-link">Ver más</a> &nbsp;
            <a href="#" class="card-link" *ngIf="evento.precio">Comprar tickets ({{ evento.precio }} €)</a>
        </div>
    </div>
</div>

<div class="d-flex justify-content-center" *ngIf="!eventos">
    <p class="lead text-muted text-center">
        <svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
            <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
        </svg>
        <br/><br/>
        Cargando eventos...
    </p>
</div>

<div class="d-flex justify-content-center" *ngIf="eventos && eventos.length === 0">
    <p class="lead">No hay eventos para mostrate</p>
</div>

<div class="d-flex justify-content-center" *ngIf="eventos && eventos.length !== 0">
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            <li [class]="page === 0 ? 'page-item disabled' : 'page-item'">
                <a class="page-link" href="javascript:window.Boolean(0)" aria-label="Anterior"
                   (click)="goToPreviousPage()">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Anterior</span>
                </a>
            </li>
            <li *ngFor="let i of range(0, totalPages)" [class]="page === i ? 'page-item active' : 'page-item'">
                <a class="page-link" href="javascript:window.Boolean(0)" (click)="goToPage(i)">{{ i + 1 }}</a>
            </li>
            <li [class]="page === totalPages - 1 ? 'page-item disabled' : 'page-item'">
                <a class="page-link" href="javascript:window.Boolean(0)" aria-label="Siguiente"
                   (click)="goToNextPage()">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Siguiente</span>
                </a>
            </li>
        </ul>
    </nav>
</div>